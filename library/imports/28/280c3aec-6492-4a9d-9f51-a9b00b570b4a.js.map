{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\HelloWorld.js"],"names":["require","cc","Class","extends","Component","properties","t_prefab","default","type","Prefab","hook1","Node","hook2","selfHook","name1","Label","name2","pos","logicDelta","ticks","fishArr","operation","onLoad","winSize","director","getWinSize","console","log","width","height","manager","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","onFire","on","startGame","playerFire","i","fishes","length","config","fish","instantiate","parent","node","js","getComponent","direction","speed","setPosition","x","y","push","params","string","rotation","hook","rotationAngle","fire","update","dt","tick","isValid","jsHook1","jsHook2","callback","event","customEventData","network"],"mappings":"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","file":"HelloWorld.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["require(\"Config\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        t_prefab:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        hook1: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        hook2: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        selfHook: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        name1: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        name2: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        pos:0,\r\n        logicDelta:0.1,\r\n        ticks:0,\r\n        fishArr:[],\r\n        operation:[],\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var winSize = cc.director.getWinSize();\r\n        console.log(\"win size width:\" + winSize.width + \", height:\" + winSize.height);\r\n\r\n        var manager = cc.director.getCollisionManager();\r\n        manager.enabled = true;\r\n        manager.enabledDebugDraw = true;\r\n        manager.enabledDrawBoundingBox = true;\r\n\r\n        onFire.on(\"start_scene\", this.startGame, this);\r\n        onFire.on(\"player_fire\", this.playerFire, this);\r\n\r\n        for(var i = 0; i < fishes.length; i ++) {\r\n            var config = fishes[i];\r\n            var fish = cc.instantiate(this.t_prefab);\r\n            fish.parent = this.node;\r\n            var js = fish.getComponent(\"Fish\");\r\n            js.direction = config.direction;\r\n            js.speed = config.speed;\r\n            fish.setPosition(config.x, config.y);\r\n            this.fishArr.push(fish);\r\n        }        \r\n    },\r\n\r\n    startGame: function(params) {\r\n        this.name1.string = params.name1;\r\n        this.name2.string = params.name2;\r\n        this.pos = params.pos;\r\n        if(this.pos == 1) {\r\n            this.selfHook = this.hook1;\r\n        } else if(this.pos == 2) {\r\n            this.selfHook = this.hook2;\r\n        }\r\n    },\r\n\r\n    playerFire: function(params) {\r\n        var pos = params.pos;\r\n        var rotation = params.rotation;\r\n        if(pos == 1) {\r\n            var hook = this.hook1.getComponent(\"Hook\");\r\n            hook.rotationAngle = rotation;\r\n            hook.fire();\r\n        } else {\r\n            var hook = this.hook2.getComponent(\"Hook\");\r\n            hook.rotationAngle = rotation;\r\n            hook.fire();\r\n        }\r\n    },\r\n\r\n    // called every frame\r\n    update: function (dt) {\r\n        this.tick();\r\n    },\r\n\r\n    tick: function() {\r\n\r\n        for(var i = 0; i < this.fishArr.length; i ++) {\r\n            var fish = fishArr[i];\r\n            if(cc.isValid(fish)) {\r\n                var js = fish.getComponent(\"Fish\");\r\n                js.tick(this.logicDelta);    \r\n            }\r\n        }\r\n\r\n        var jsHook1 = this.hook1.getComponent(\"Hook\");\r\n        var jsHook2 = this.hook2.getComponent(\"Hook\");\r\n        jsHook1.tick(this.logicDelta);\r\n        jsHook2.tick(this.logicDelta);\r\n\r\n        this.ticks += 1;\r\n    },\r\n\r\n    callback: function (event, customEventData) {\r\n        console.log(\"fire ....\");\r\n        var hook = this.selfHook.getComponent(\"Hook\");\r\n        // hook.fire();\r\n        network.fire(this.pos, hook.rotationAngle);\r\n    },\r\n});\r\n"]}