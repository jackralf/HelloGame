{"version":3,"sources":["Fish.js"],"names":["cc","Class","extends","Component","properties","onCatched","hookNode","default","type","Node","delta","Vec2","direction","speed","onLoad","start","update","dt","tick","worldPos","parent","convertToWorldSpace","position","node","setPosition","convertToNodeSpace","add","hook","getComponent","state","destroy","x","onCollisionEnter","other","self","console","log","catch","color","Color","RED","sub"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,mBAAW,KAhBH;AAiBRC,kBAAS;AACLC,qBAAS,IADJ;AAELC,kBAAMR,GAAGS;AAFJ,SAjBD;AAqBRC,eAAM;AACFH,qBAAS,IADP;AAEFC,kBAAMR,GAAGW;AAFP,SArBE;AAyBRC,mBAAU,CAzBF;AA0BRC,eAAM;AA1BE,KAHP;;AAgCL;;AAEAC,UAlCK,oBAkCK,CAET,CApCI;AAsCLC,SAtCK,mBAsCI,CAER,CAxCI;AA0CLC,UA1CK,kBA0CGC,EA1CH,EA0CO,CAEX,CA5CI;;;AA8CLC,UAAM,cAASD,EAAT,EAAa;AACf,YAAG,KAAKX,QAAL,IAAkB,KAAKI,KAAvB,IAAgC,KAAKL,SAAxC,EAAmD;AAC/C,gBAAIc,WAAW,KAAKb,QAAL,CAAcc,MAAd,CAAqBC,mBAArB,CAAyC,KAAKf,QAAL,CAAcgB,QAAvD,CAAf;AACA,iBAAKC,IAAL,CAAUC,WAAV,CAAsB,KAAKD,IAAL,CAAUH,MAAV,CAAiBK,kBAAjB,CAAoCN,QAApC,EAA8CO,GAA9C,CAAkD,KAAKhB,KAAvD,CAAtB;AACA,gBAAIiB,OAAO,KAAKrB,QAAL,CAAcsB,YAAd,CAA2B,MAA3B,CAAX;AACA,gBAAGD,KAAKE,KAAL,IAAc,MAAjB,EAAyB;AACrB,qBAAKN,IAAL,CAAUO,OAAV;AACH;AACJ,SAPD,MAOO;AACH,iBAAKP,IAAL,CAAUQ,CAAV,IAAe,KAAKlB,KAAL,GAAa,KAAKD,SAAlB,GAA8BK,EAA7C;AACA,gBAAG,KAAKM,IAAL,CAAUQ,CAAV,IAAe,GAAf,IAAsB,KAAKR,IAAL,CAAUQ,CAAV,IAAe,CAAC,GAAzC,EAA8C;AAC1C,qBAAKnB,SAAL,GAAiB,CAAC,KAAKA,SAAvB;AACH;AACJ;AACJ,KA5DI;;AA8DLoB,sBAAkB,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrCC,gBAAQC,GAAR,CAAY,qBAAZ;AACA,YAAIT,OAAOM,MAAML,YAAN,CAAmB,MAAnB,CAAX;AACAO,gBAAQC,GAAR,CAAY,WAAWT,KAAKE,KAA5B;AACA,YAAGF,KAAKE,KAAL,IAAc,MAAjB,EAAyB;AACrBF,iBAAKU,KAAL,GAAa,IAAb;AACAV,iBAAKE,KAAL,GAAa,MAAb;;AAEA,iBAAKxB,SAAL,GAAiB,IAAjB;AACA,iBAAKC,QAAL,GAAgB2B,MAAMV,IAAtB;AACA,iBAAKA,IAAL,CAAUe,KAAV,GAAkBtC,GAAGuC,KAAH,CAASC,GAA3B;AACA,gBAAIrB,WAAW,KAAKb,QAAL,CAAcc,MAAd,CAAqBC,mBAArB,CAAyC,KAAKf,QAAL,CAAcgB,QAAvD,CAAf;AACA,iBAAKZ,KAAL,GAAa,KAAKa,IAAL,CAAUD,QAAV,CAAmBmB,GAAnB,CAAuB,KAAKlB,IAAL,CAAUH,MAAV,CAAiBK,kBAAjB,CAAoCN,QAApC,CAAvB,CAAb;AACAnB,eAAGoC,GAAH,CAAO,oBAAoB,KAAK1B,KAAhC;AACH;AACJ;AA7EI,CAAT","file":"Fish.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        onCatched: false,\r\n        hookNode:{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        delta:{\r\n            default: null,\r\n            type: cc.Vec2,\r\n        },\r\n        direction:1,\r\n        speed:100,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        \r\n    },\r\n\r\n    tick: function(dt) {\r\n        if(this.hookNode &&  this.delta && this.onCatched) {\r\n            var worldPos = this.hookNode.parent.convertToWorldSpace(this.hookNode.position);\r\n            this.node.setPosition(this.node.parent.convertToNodeSpace(worldPos).add(this.delta));\r\n            var hook = this.hookNode.getComponent(\"Hook\");\r\n            if(hook.state == \"IDLE\") {\r\n                this.node.destroy();\r\n            }\r\n        } else {\r\n            this.node.x += this.speed * this.direction * dt;\r\n            if(this.node.x >= 700 || this.node.x <= -700) {\r\n                this.direction = -this.direction;\r\n            }\r\n        }\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        console.log('on collision enter2');\r\n        var hook = other.getComponent(\"Hook\");\r\n        console.log(\"state:\" + hook.state);\r\n        if(hook.state == \"FIRE\") {\r\n            hook.catch = true;\r\n            hook.state = \"PULL\";\r\n\r\n            this.onCatched = true;\r\n            this.hookNode = other.node;\r\n            this.node.color = cc.Color.RED;\r\n            var worldPos = this.hookNode.parent.convertToWorldSpace(this.hookNode.position);\r\n            this.delta = this.node.position.sub(this.node.parent.convertToNodeSpace(worldPos))\r\n            cc.log(\"Node Position: \" + this.delta);\r\n        }\r\n    },\r\n});\r\n"]}